***************
*** 14,19 ****
  
  #include "tkMenu.h"
  
  /*
   * Forward declarations for procedures defined later in this file:
   */
--- 14,21 ----
  
  #include "tkMenu.h"
  
+ int bKBMenuRestack=0;
+ 
  /*
   * Forward declarations for procedures defined later in this file:
   */
***************
*** 925,931 ****
      if (!Tk_IsMapped(menuPtr->tkwin)) {
  	Tk_MapWindow(menuPtr->tkwin);
      }
      TkWmRestackToplevel((TkWindow *) menuPtr->tkwin, Above, NULL);
      return TCL_OK;
  }
  
--- 927,935 ----
      if (!Tk_IsMapped(menuPtr->tkwin)) {
  	Tk_MapWindow(menuPtr->tkwin);
      }
+     bKBMenuRestack = 1;
      TkWmRestackToplevel((TkWindow *) menuPtr->tkwin, Above, NULL);
+     bKBMenuRestack = 0;
      return TCL_OK;
  }
  
